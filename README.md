# Django магазин с встроенным блогом

## Для начала работы с проектом необходимо выполнить следующие команды в консоли:

```sh
git clone https://github.com/voidCaloneian/django-shop-with-built-in-blog.git
cd django-shop-with-build-in-blog
pip install -r .\requirements.txt
python .\manage.py runserver
```

## Стандартный пользователь с правами администратора:
- Номер телефона: 77777777777
- Пароль: q0w0e=1-2-3

## Каталог
На странице каталога представлены функции пагинации, выбора типа упорядочивания продуктов и сортировки по цене. Вы можете выбрать категорию продуктов и произвести поиск. Сортировка и упорядочивание выполняются через ajax-запрос на сервер, для чего используются Event Listeners на кнопках.

Карточки товаров имеют разделение на товары со скидкой и обычные товары. В зависимости от типа товара выбираются соответствующие классы для карточек, а также иконка скидки, размер скидки и цена без скидки. Чтобы добавить товар в корзину, нужно навести курсор на карточку товара и нажать на всплывающую иконку корзины. При нажатии произойдет добавление товара в COOKIES, а также обновление виджета количества товаров и стоимости корзины в правом верхнем углу. При удалении товара из корзины также происходит обновление виджетов.

При упорядочивании или сортировке товара по цене, блок товаров с пагинацией обновляется. Если происходит сортировка по цене, то пагинация сбрасывается (начинается с первой страницы), а при обычном упорядочивании обновляются только продукты. Ниже товаров выводятся случайным образом три статьи с надписью "Наши статьи".

## Корзина
На странице корзины отображаются товары, которые были ранее добавлены в нее и сохранены в COOKIES. Там же есть возможность ввести промокод и применить его к корзине, отправив ajax-запрос на сервер для проверки его наличия и валидности. В данный момент доступен только один промокод - TEST, который дает скидку в 25% на все товары в корзине. При изменении количества товаров или их удалении, общая стоимость товаров и корзины автоматически обновляются, а виджеты корзины и стоимости также меняются. Если все товары были удалены, на странице появляется сообщение о том, что корзина пуста и нужно добавить товары.

## Блог
На странице блога вы можете использовать сайдбар для поиска статей. Поиск осуществляется по названию, описанию и тексту статьи. Вы также можете выбрать категорию, чтобы увидеть статьи, связанные с выбранной категорией. Ниже выбора категорий отображается блок с тремя последними статьями, которые были опубликованы. Кроме того, вы можете использовать подсказки для поиска, которые отображаются ниже последних статей. Нажав на любую подсказку, вы запустите поиск статей по выбранному запросу. Кнопка "Читать" позволяет перейти на страницу определенной статьи. В качестве поля текста для статей используется класс 'RichTextField' из модуля django-ckeditor, которое позволяет создавать статьи с css стилями. 

## Авторизация
ри нажатии на кнопку "Войти" в правом верхнем углу страницы, адрес текущей страницы сохраняется, и после авторизации/регистрации вы будете перенаправлены на эту страницу. На странице авторизации есть контейнер, который содержит два блока: "Авторизация" и "Регистрация". В блоке "Авторизация" находится форма, которая проверяет номер телефона на валидность при нажатии на кнопку "Авторизоваться". Если номер валидный, то сервер запишет в Redis смс-код для введенного номера телефона длительностью в 900 секунд (15 минут). После ввода кода, поле очистится. Код можно получить из консоли, где запускали команду 'python manage.py runserver'. Получить новый код можно нажав на кнопку "Отправить новый код" в форме, после этого старый код в Redis будет заменен новым. В блоке "Регистрация" находится форма, которая делает все то же самое, что и в блоке "Авторизация", за исключением того, что для продолжения регистрации требуется получить от сервера ответ о том, что номера нет в базе данных.

## На сайте повсеместно используются какие-либо скрипты для того, чтобы страница не обновлялась, а изменения происходили на стороне пользователя


Для облегченного редактирования кода и последующего использования определенный html блоков без их написания шаблоны были разбиты на компоненты.
Вот само дерево:

├───basic
├───blog
│   ├───blog_creation
│   ├───blog_details
│   ├───grid
├───other_templates
│   └───login
├───shop
│   └───shop_grid
│       └───components
│           ├───left_sidebar
│           │   └───components
│           ├───products_block
│           │   └───discounted_or_normal
│           └───products_filtering_and_info
│               └───components
└───shopping
    ├───shopping_cart
    │   └───components
    │       ├───no_products
    │       │   └───components
    │       │       └───buttons
    │       └───products
    │           └───components
    │               └───price
    │                   └───components
    └───shop_details
        └───components
            ├───product_info
            │   └───components
            └───related_products
                └───components
                    └───products
                        └───components
