# Django магазин с встроенным блогом

## Для начала работы с проектом необходимо выполнить следующие команды в консоли:

```sh
git clone https://github.com/voidCaloneian/django-shop-with-built-in-blog.git
cd django-shop-with-build-in-blog
pip install -r .\requirements.txt
python .\manage.py runserver
```

## Стандартный пользователь с правами администратора:
- Номер телефона: 77777777777
- Пароль: q0w0e=1-2-3

## Каталог
![изображение](https://user-images.githubusercontent.com/106653303/223090279-dd36a5fe-4ffb-4dec-9c26-128da12e3956.png)

На странице каталога представлены функции пагинации, выбора типа упорядочивания продуктов и сортировки по цене. Вы можете выбрать категорию продуктов и произвести поиск. Сортировка и упорядочивание выполняются через ajax-запрос на сервер, для чего используются Event Listeners на кнопках.

Карточки товаров имеют разделение на товары со скидкой и обычные товары. В зависимости от типа товара выбираются соответствующие классы для карточек, а также иконка скидки, размер скидки и цена без скидки. Чтобы добавить товар в корзину, нужно навести курсор на карточку товара и нажать на всплывающую иконку корзины. При нажатии произойдет добавление товара в COOKIES, а также обновление виджета количества товаров и стоимости корзины в правом верхнем углу. При удалении товара из корзины также происходит обновление виджетов.

При упорядочивании или сортировке товара по цене, блок товаров с пагинацией обновляется. Если происходит сортировка по цене, то пагинация сбрасывается (начинается с первой страницы), а при обычном упорядочивании обновляются только продукты. 

## Страница продукта
![изображение](https://user-images.githubusercontent.com/106653303/223090487-23bde7f5-d4e0-462d-91f0-e8cf8790981a.png)

На странице продукта расположены кнопки "Добавить в корзину" и "Убрать из корзины", в зависимости от наличия товара в корзине. До добавления товара в корзину можно менять его количество, после добавления это становится невозможно. Это происходит без перезагрузки страницы благодаря JavaScript.

Ниже расположен блок отзывов, в котором авторизованный пользователь может написать свой отзыв, если его ещё нет. Если отзыв уже есть, то он будет отображен первым и помечен голубым фоном. Если пользователь напишет новый отзыв, будет отправлен ajax-запрос на сервер для его публикации. Если отзыв опубликуется, блок написания отзыва будет удален, а новый отзыв будет добавлен на страницу.

Ниже будут находится отзывы других пользователей, изначально на странице отображаются 4 отзыва. Чтобы загрузить больше отзывов, нужно нажать на соответствующую кнопку, которая отправит ajax-запрос на сервер на получение ещё четырех отзывов. Если ответ положительный, скрипт добавит отзывы на страницу.


Внизу страницы расположены 4 случайных товара из той же категории, что и выбранный пользователем товар.
![изображение](https://user-images.githubusercontent.com/106653303/223090537-d230f5d6-1f67-4780-ac30-babed6ee0989.png)

## Корзина
![изображение](https://user-images.githubusercontent.com/106653303/223090661-05057e3f-25a0-4a17-bc67-15ea5072db53.png)

На странице корзины отображаются товары, которые были ранее добавлены в нее и сохранены в COOKIES. Там же есть возможность ввести промокод и применить его к корзине, отправив ajax-запрос на сервер для проверки его наличия и валидности. В данный момент доступен только один промокод - TEST, который дает скидку в 25% на все товары в корзине. При изменении количества товаров или их удалении, общая стоимость товаров и корзины автоматически обновляются, а виджеты корзины и стоимости также меняются. Если все товары были удалены, на странице появляется сообщение о том, что корзина пуста и нужно добавить товары.
![изображение](https://user-images.githubusercontent.com/106653303/223090700-683ee9a1-d08b-450a-9fb5-9925cc58551e.png)


## Блог
![изображение](https://user-images.githubusercontent.com/106653303/223090748-c0d00a68-797c-4bc2-82ee-1ef5dc196134.png)
![изображение](https://user-images.githubusercontent.com/106653303/223090905-9a0f65d5-2607-4b52-af91-03521d05ac9c.png)

На странице блога вы можете использовать сайдбар для поиска статей. Поиск осуществляется по названию, описанию и тексту статьи. Вы также можете выбрать категорию, чтобы увидеть статьи, связанные с выбранной категорией. Ниже выбора категорий отображается блок с тремя последними статьями, которые были опубликованы. Кроме того, вы можете использовать подсказки для поиска, которые отображаются ниже последних статей. Нажав на любую подсказку, вы запустите поиск статей по выбранному запросу. Кнопка "Читать" позволяет перейти на страницу определенной статьи. В качестве поля текста для статей используется класс 'RichTextField' из модуля django-ckeditor, которое позволяет создавать статьи с css стилями. 


## Авторизация
ри нажатии на кнопку "Войти" в правом верхнем углу страницы, адрес текущей страницы сохраняется, и после авторизации/регистрации вы будете перенаправлены на эту страницу. На странице авторизации есть контейнер, который содержит два блока: "Авторизация" и "Регистрация". В блоке "Авторизация" находится форма, которая проверяет номер телефона на валидность при нажатии на кнопку "Авторизоваться". Если номер валидный, то сервер запишет в Redis смс-код для введенного номера телефона длительностью в 900 секунд (15 минут). После ввода кода, поле очистится. Код можно получить из консоли, где запускали команду 'python manage.py runserver'. Получить новый код можно нажав на кнопку "Отправить новый код" в форме, после этого старый код в Redis будет заменен новым. В блоке "Регистрация" находится форма, которая делает все то же самое, что и в блоке "Авторизация", за исключением того, что для продолжения регистрации требуется получить от сервера ответ о том, что номера нет в базе данных. Также в обоих блоках у номеров телефона стоит маска на более красивый и удобочитаемый вид.
![изображение](https://user-images.githubusercontent.com/106653303/223090968-ba63f819-e730-4759-96c9-cc5bab92291f.png)
![изображение](https://user-images.githubusercontent.com/106653303/223091031-e3d5de89-920b-4794-94ce-0ac7709d415d.png)
![изображение](https://user-images.githubusercontent.com/106653303/223091011-5c055677-ba01-4906-9515-eb184ce93cb9.png)

# На каждой странице внизу находится блок, где выбирается три случайных статьи
![изображение](https://user-images.githubusercontent.com/106653303/223091299-b959ab91-aad8-42a5-b8fd-83d6c2b32fbe.png)


## На сайте повсеместно используются какие-либо скрипты для того, чтобы страница не обновлялась, а изменения происходили на стороне пользователя


Для облегченного редактирования кода и последующего использования определенный html блоков без их написания шаблоны были разбиты на компоненты.
Вот само дерево:

![изображение](https://user-images.githubusercontent.com/106653303/223088343-f82ec495-205b-4e1c-9c65-49b604cf5709.png)
